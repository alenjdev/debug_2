import{j as m,r as a,A as y,R as h,a as p}from"./vendor.fb673083.js";const b=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(n){if(n.ep)return;n.ep=!0;const t=o(n);fetch(n.href,t)}};b();const v={debugItems:[{name:"Estop status",state:"Enable"},{name:"Safety system power status",state:"On"},{name:"CAN controller power",state:"On"}]},w="_table_176v2_1";var g={table:w};const s=m.exports.jsx,c=m.exports.jsxs;class x extends a.exports.Component{render(){return s("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:g.table,children:this.props.children})}}const C="_header_1rzw6_1";var _={header:C};class N extends a.exports.Component{render(){return s("thead",{children:this.props.headers.map((e,o)=>s("th",{className:_.header,children:e},o))})}}class O extends a.exports.Component{render(){return s("tbody",{children:this.props.children})}}const E="_row_d10ys_1";var A={row:E};class $ extends a.exports.Component{render(){return s("tr",{className:A.row,children:this.props.children})}}var f={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class i extends a.exports.Component{render(){return s("td",{className:`${f["data-cell"]} ${f[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const T=(r,e)=>r==="Estop status"&&(e==null?void 0:e.estop)===void 0?["-","unknown"]:r==="Estop status"&&(e==null?void 0:e.estop)===!0?["Enable","bad"]:r==="Estop status"&&(e==null?void 0:e.estop)===!1?["Disable","good"]:r==="Safety system power status"&&(e==null?void 0:e.safetySystem)===void 0?["-","unknown"]:r==="Safety system power status"&&(e==null?void 0:e.safetySystem)===!0?["On","good"]:r==="Safety system power status"&&(e==null?void 0:e.safetySystem)===!1?["Off","bad"]:r==="CAN controller power"&&(e==null?void 0:e.canController)===void 0?["-","unknown"]:r==="CAN controller power"&&(e==null?void 0:e.canController)===!0?["On","good"]:r==="CAN controller power"&&(e==null?void 0:e.canController)===!1?["Off","bad"]:["-","unknown"],j=({tableHeaders:r,topicStats:e})=>c(x,{columns:r.length,children:[s(N,{headers:r}),s(O,{children:v.debugItems.map((o,d)=>{const n=T(o.name,e);return c($,{children:[s(i,{content:o.name}),s(i,{content:n[0].toString(),type:n[1]})]},d)})})]}),k=()=>{a.exports.useState("Waiting for data...");const[r,e]=a.exports.useState({estop:void 0,safetySystem:void 0,canController:void 0});a.exports.useEffect(()=>{y.addModuleDataListener(o)},[]);const o=async d=>{const n=d.streams;if(Object.keys(n).length===0)throw new Error("No streams.");let t=r;Object.keys(n).forEach((l,R)=>{const u=L(n,l);typeof u!="string"&&u!==void 0&&(n[l].data[0].name==="estop"&&(t.estop=u.values[0]),n[l].data[0].name==="can.controller"&&(t.canController=u.values[0]),n[l].data[0].name==="safety.system.status"&&(t.safetySystem=u.values[0])),JSON.stringify(t)!==JSON.stringify(r)&&e(t)})};return s(j,{topicStats:r,tableHeaders:["Item","Status"]})},L=(r,e)=>{if(r[e]===void 0)return"No stream.";if(r[e].loading)return;if(r[e].tooMuchData)return"Too much data.";if(r[e].data.length===0)return"No data.";const o=r[e].data[0].points.at(-1);return o?o[1]:"No datapoints."};function M(){return s("div",{className:"App",children:s(k,{})})}h.render(s(p.StrictMode,{children:s(M,{})}),document.getElementById("root"));
