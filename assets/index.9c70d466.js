import{j as p,r as l,A as v,R as w,a as g}from"./vendor.fb673083.js";const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};x();const C={debugItems:[{name:"Estop status",state:"Enable"},{name:"Safety system power status",state:"On"},{name:"CAN controller power",state:"On"}]},_="_table_176v2_1";var N={table:_};const t=p.exports.jsx,m=p.exports.jsxs;class O extends l.exports.Component{render(){return t("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:N.table,children:this.props.children})}}const E="_header_1rzw6_1";var A={header:E};class $ extends l.exports.Component{render(){return t("thead",{children:this.props.headers.map((e,o)=>t("th",{className:A.header,children:e},o))})}}class T extends l.exports.Component{render(){return t("tbody",{children:this.props.children})}}const j="_row_d10ys_1";var k={row:j};class L extends l.exports.Component{render(){return t("tr",{className:k.row,children:this.props.children})}}var y={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class h extends l.exports.Component{render(){return t("td",{className:`${y["data-cell"]} ${y[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const M=(r,e)=>r==="Estop status"&&(e==null?void 0:e.estop)===void 0?["-","unknown"]:r==="Estop status"&&(e==null?void 0:e.estop)===!0?["Enable","bad"]:r==="Estop status"&&(e==null?void 0:e.estop)===!1?["Disable","good"]:r==="Safety system power status"&&(e==null?void 0:e.safetySystem)===void 0?["-","unknown"]:r==="Safety system power status"&&(e==null?void 0:e.safetySystem)===!0?["On","good"]:r==="Safety system power status"&&(e==null?void 0:e.safetySystem)===!1?["Off","bad"]:r==="CAN controller power"&&(e==null?void 0:e.canController)===void 0?["-","unknown"]:r==="CAN controller power"&&(e==null?void 0:e.canController)===!0?["On","good"]:r==="CAN controller power"&&(e==null?void 0:e.canController)===!1?["Off","bad"]:["-","unknown"],R=({tableHeaders:r,topicStats:e})=>m(O,{columns:r.length,children:[t($,{headers:r}),t(T,{children:C.debugItems.map((o,u)=>{const n=M(o.name,e);return m(L,{children:[t(h,{content:o.name}),t(h,{content:n[0].toString(),type:n[1]})]},u)})})]}),D=()=>{const[r,e]=l.exports.useState(),[o,u]=l.exports.useState(),[n,s]=l.exports.useState(),c=(f,a,i)=>f+i*1e3<a;l.exports.useEffect(()=>{v.addModuleDataListener(b)},[]);const b=async f=>{const a=f.streams;if(Object.keys(a).length===0)throw new Error("No streams.");Object.keys(a).forEach(i=>{const d=I(a,i);if(typeof d!="string"&&d!==void 0){if(a[i].data[0].name==="estop"){if(c(d[0],f.time,10)){e(void 0);return}e(d[1].values[0])}if(a[i].data[0].name==="can.controller"){if(c(d[0],f.time,10)){s(void 0);return}s(d[1].values[0])}if(a[i].data[0].name==="safety.system.status"){if(c(d[0],f.time,10)){u(void 0);return}u(d[1].values[0])}}})};return t(R,{topicStats:{estop:r,canController:n,safetySystem:o},tableHeaders:["Item","Status"]})},I=(r,e)=>{if(r[e]===void 0)return"No stream.";if(r[e].loading)return;if(r[e].tooMuchData)return"Too much data.";if(r[e].data.length===0)return"No data.";const o=r[e].data[0].points.at(-1);return o||"No datapoints."};function P(){return t("div",{className:"App",children:t(D,{})})}w.render(t(g.StrictMode,{children:t(P,{})}),document.getElementById("root"));
